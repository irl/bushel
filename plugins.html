
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Plugin API &#8212; bushel 0.0.0a documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="References" href="references.html" />
    <link rel="prev" title="check_collector" href="monitoring/check_collector.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="plugin-api">
<h1>Plugin API<a class="headerlink" href="#plugin-api" title="Permalink to this headline">¶</a></h1>
<p>The following documents a draft API to be implemented by plugins. These
functions will be called by the reference checker. While plugins may keep state
internally, it is expected that any state they do keep is not required to be
persistent.</p>
<dl class="class">
<dt>
<code class="descname">DocumentIdentifier(doctype, subject, datetime, digests):</code></dt>
<dd><p>Represents a document that is expected to exist.</p>
<p><strong>Attributes:</strong></p>
<dl class="attribute">
<dt id="doctype">
<code class="descname">doctype</code><a class="headerlink" href="#doctype" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a> of the document.</p>
</dd></dl>

<dl class="attribute">
<dt id="subject">
<code class="descname">subject</code><a class="headerlink" href="#subject" title="Permalink to this definition">¶</a></dt>
<dd><p>The subject of the document. This is usually a string containing an opaque
identifier. Examples include the fingerprint of a relay for a server
descriptor, or the hostname of an OnionPerf vantage point.</p>
</dd></dl>

<dl class="attribute">
<dt id="datetime">
<code class="descname">datetime</code><a class="headerlink" href="#datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> related to the document. The exact
meaning of this will be document dependent. Example include the published
time for a server descriptor, or the valid-after time for a network
status consensus.</p>
</dd></dl>

<dl class="attribute">
<dt id="digests">
<code class="descname">digests</code><a class="headerlink" href="#digests" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> containing mappings of
<code class="xref py py-class docutils literal notranslate"><span class="pre">DigestHash</span></code> to <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple`s.</span> <span class="pre">Each</span> <span class="pre">tuple</span>
<span class="pre">contains</span> <span class="pre">a</span> <span class="pre">:py:class:`str</span></code> representation of the digest and a
<code class="xref py py-class docutils literal notranslate"><span class="pre">stem.descriptor.DigestEncoding</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ExamplePlugin">
<em class="property">class </em><code class="descname">ExamplePlugin</code><a class="headerlink" href="#ExamplePlugin" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ExamplePlugin.expectations">
<code class="descname">expectations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ExamplePlugin.expectations" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> of <code class="xref py py-class docutils literal notranslate"><span class="pre">DocumentIdentifier</span></code> for
documents that are expected to be available for fetching.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ExamplePlugin.fetch">
<code class="descname">fetch</code><span class="sig-paren">(</span><em>docid</em><span class="sig-paren">)</span><a class="headerlink" href="#ExamplePlugin.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches a document from a remote location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>docid</strong> (<em>DocumentIdentifier</em>) – Identifier for the document to be
fetched.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ExamplePlugin.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>document</em><span class="sig-paren">)</span><a class="headerlink" href="#ExamplePlugin.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a retrieved document for any documents that are referenced and
should be fetched.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>document</strong> (<em>DocumentIdentifier</em>) – A retrieved document.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> of <code class="xref py py-class docutils literal notranslate"><span class="pre">DocumentIdentifier</span></code> for
documents that are expected to be available for fetching.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">bushel</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="archive.html">Directory Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="bandwidth.html">Bandwidth Scanner</a></li>
<li class="toctree-l1"><a class="reference internal" href="collector.html">CollecTor</a></li>
<li class="toctree-l1"><a class="reference internal" href="directory.html">Tor Directory Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloader.html">Directory Downloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Plugin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="monitoring/check_collector.html" title="previous chapter">check_collector</a></li>
      <li>Next: <a href="references.html" title="next chapter">References</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Tor Project.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/plugins.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>