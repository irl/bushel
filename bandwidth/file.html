
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Bandwidth Files &#8212; bushel 0.0.0a documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CollecTor" href="../collector.html" />
    <link rel="prev" title="Bandwidth Scanner" href="../bandwidth.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-bushel.bandwidth.file">
<span id="bandwidth-files"></span><h1>Bandwidth Files<a class="headerlink" href="#module-bushel.bandwidth.file" title="Permalink to this headline">¶</a></h1>
<p>Bandwidth files.</p>
<dl class="class">
<dt id="bushel.bandwidth.file.BandwidthFileLineError">
<em class="property">class </em><code class="descclassname">bushel.bandwidth.file.</code><code class="descname">BandwidthFileLineError</code><a class="reference internal" href="../_modules/bushel/bandwidth/file.html#BandwidthFileLineError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bushel.bandwidth.file.BandwidthFileLineError" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumeration of forgivable errors that may be encountered during parsing of
lines in a bandwidth file.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SHORT_TERMINATOR</p></td>
<td><p>A terminator with 4 <cite>=</cite> instead of 5.
<a class="reference external" href="https://bugs.torproject.org/28379">https://bugs.torproject.org/28379</a></p></td>
</tr>
<tr class="row-odd"><td><p>NO_TERMINATOR</p></td>
<td><p>No terminator present, for pre-1.0.0 compatibility.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="bushel.bandwidth.file.BandwidthFileLiner">
<em class="property">class </em><code class="descclassname">bushel.bandwidth.file.</code><code class="descname">BandwidthFileLiner</code><span class="sig-paren">(</span><em>allowed_errors=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bushel/bandwidth/file.html#BandwidthFileLiner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bushel.bandwidth.file.BandwidthFileLiner" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses <a class="reference internal" href="#bushel.bandwidth.file.BandwidthFileToken" title="bushel.bandwidth.file.BandwidthFileToken"><code class="xref py py-class docutils literal notranslate"><span class="pre">BandwidthFileToken</span></code></a> s into <code class="xref py py-class docutils literal notranslate"><span class="pre">BandwidthFileTimestamp</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">BandwidthFileHeaderLine</span></code> s and <code class="xref py py-class docutils literal notranslate"><span class="pre">BandwidthFileRelayLine</span></code>. By
default this is a strict implementation of the Tor Bandwidth File
Specification version 1.4.0 <a class="reference internal" href="../references.html#bandwidth-file-spec" id="id1"><span>[bandwidth-file-spec]</span></a>, but this can be relaxed
to account for parsing older versions, or for known bugs in Tor
implementations.</p>
<p>Lines are produced by processing tokens according to a state machine:</p>
<div class="graphviz"><img src="../_images/graphviz-1925eea43b019428aaf4fbe393bb5181a13b8b12.png" alt="digraph g {
    start [label=&quot;START&quot;];
    timestamp [label=&quot;TIMESTAMP&quot;];
    header_line [label=&quot;HEADER-LINE&quot;];
    header_line_kv [label=&quot;HEADER-LINE-KV&quot;];
    relay_line [label=&quot;RELAY-LINE&quot;];
    relay_line_sp [label=&quot;RELAY-LINE-SP&quot;];
    relay_line_kv [label=&quot;RELAY-LINE-KV&quot;];
    done [label=&quot;DONE&quot;];

    start -&gt; timestamp [label=&quot;TIMESTAMP&quot;];
    timestamp -&gt; header_line [label=&quot;NL&quot;];
    header_line -&gt; header_line_kv [label=&quot;KEYVALUE&quot;];
    header_line_kv -&gt; header_line [label=&quot;NL&quot;];
    header_line -&gt; relay_line [label=&quot;TERMINATOR&quot;];
    header_line -&gt; relay_line [label=&quot;SHORT_TERMINATOR&quot;, color=&quot;red&quot;];
    header_line_kv -&gt; relay_line_sp [label=&quot;SP&quot;, color=&quot;red&quot;];
    relay_line -&gt; relay_line_kv [label=&quot;KEYVALUE&quot;];
    relay_line_kv -&gt; relay_line [label=&quot;NL&quot;];
    relay_line_kv -&gt; relay_line_sp [label=&quot;SP&quot;];
    relay_line_sp -&gt; relay_line_kv [label=&quot;KEYVALUE&quot;];
    relay_line -&gt; done [label=&quot;EOF&quot;];
}" class="graphviz" /></div>
<p>State transitions shown in red would ideally not be needed as they are
protocol violations, but implementations of the protocol exist that produce
documents requiring these transitions and we need to be bug compatible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>allowed_errors</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>(</em><a class="reference internal" href="#bushel.bandwidth.file.BandwidthFileLineError" title="bushel.bandwidth.file.BandwidthFileLineError"><em>BandwidthFileLineError</em></a><em>)</em>) – A list of errors that will be considered non-fatal during itemization.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="bushel.bandwidth.file.BandwidthFileToken">
<em class="property">class </em><code class="descclassname">bushel.bandwidth.file.</code><code class="descname">BandwidthFileToken</code><a class="reference internal" href="../_modules/bushel/bandwidth/file.html#BandwidthFileToken"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bushel.bandwidth.file.BandwidthFileToken" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kind</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the kind of token</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – kind-dependent value</p></li>
<li><p><strong>line</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – line number</p></li>
<li><p><strong>column</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – column number</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">bushel</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../archive.html">Directory Archive</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../bandwidth.html">Bandwidth Scanner</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Bandwidth Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../collector.html">CollecTor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../directory.html">Tor Directory Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloader.html">Directory Downloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring.html">Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../bandwidth.html">Bandwidth Scanner</a><ul>
      <li>Previous: <a href="../bandwidth.html" title="previous chapter">Bandwidth Scanner</a></li>
      <li>Next: <a href="../collector.html" title="next chapter">CollecTor</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Tor Project.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/bandwidth/file.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>